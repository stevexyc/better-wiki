<head>
  <title>better-wiki</title>
</head>

<body>
</body>

<template name="appWrap">
	<div class="app-wrap">
		<div id="menu-wrap" class="">
			{{> zmenu}}
		</div>
		<div id="content-wrap">
			<div class="content">
			{{> topBar}}
			{{> yield}}	
			{{> footer}}
			</div>
		{{> additembox}}
		</div>		
	</div>
	{{> actionbar}}
</template>

<template name="topBar">
	<div class="topbar">
		<i id="menu-toggle" class="fa fa-bars"></i>
		{{#if currentUser}}
			<i class="fa fa-plus pull-right"></i>
		{{/if}}
		<div class="pull-right searchbox">
			<input type="text" id="searchbar" class="search form-control typeahead" autocomplete="off" spellcheck="off" data-source="terms"/>
			<i class="fa fa-search"></i>
		</div>
	</div>
</template>

<template name="zmenu">
	<div class="menu">
		<ul>
			<li>
				{{> loginButtons}}
			</li>
			<li>
				<div class="menu-heading">Pages</div>
				<ul id="page-menu">
				{{#each linklist}}
					<li class="sub-lvl-link {{current}}">
						<a href="{{this.slug}}">{{this.title}}</a>
						{{#if currentUser}}
						<i class="fa fa-times-circle delete-link"></i>
						{{/if}}
					</li>
				{{/each}}
					<li class="add-to-menu">
						<a href="#" id="add-link"><i class="fa fa-plus-circle"></i> new link</a>
					</li>
				</ul>
			</li>
			<li class="{{current 'index'}}">
				<a href="/index">Index</a></li>
		</ul>
	</div>
</template>

<template name="page">
	{{> zitem}}
</template>

<template name="index">
	<div class="page-title">
		<h3>Index</h3>
	</div>
	{{#each item}}
		<div>
			<a class="sxc-zitem">{{this.name}}</a>
			<div class="index-item hide">
			{{> zitem}}
			</div>
		</div>
	{{/each}}
</template>

<template name="zitem">
	<div class="item {{#if being_edited}}editbox{{/if}}" id="{{_id}}" name="{{_id}}">
		<div class="title-bar">
			{{#if being_edited}}
				<input class="edit-title" type="text" value="{{this.name}}">
			{{else}}
				<span class="title">{{this.name}}</span>
			{{/if}}
			{{#if being_edited}}
				<span class="btn save-btn"></span>
			{{else}}
				{{#if currentUser}}
				<i class="fa fa-times pull-right"></i>
				<span class="btn edit-btn"></span> 
				{{/if}}
			{{/if}}
		</div>
		<div class="panel" style="padding-top:10px;">
			{{{this.definition}}}
		</div>
	</div>
</template>

<template name="additembox">
	<div class="additem-wrap {{showAdditem}}">
		<div class="additem-box">
		{{> additem }}
		</div>
	</div>
</template>


<template name="additem">
	<div id="add-item" class="item">
		<div class="bar">
			{{#if currentUser}}
			<i class="fa fa-minus"></i>		
			<i class="fa fa-save"></i>
			{{/if}}
		</div>
		<div class="title-bar">
			<input id="add-item-title" class="edit-title" type="text" placeholder="Title">
		</div>
		<div class="panel">
		</div>
	</div>
</template>

<template name="inneritem">
	{{#with getitem zname}}
	<div class="panel" contenteditable="false">
		<span style="display:block">
			<span class="inneritem-title">{{this.name}}</span>
		 	<a href="/{{this.slug}}" class="slug">
				<i class="fa fa-external-link-square innerlink"></i>
			</a>
		</span>
		{{{this.definition}}}
	</div>
	{{/with}}
</template>

<template name="actionbar">
	<div class="confirm-overlay {{showConfirm}}"></div>
	<div class="confirm-box-wrap {{showConfirm}}">
		<div class="confirm-box">
			Delete <span>{{itemName}}</span>?
		</div>
		<i class="fa fa-check confirm-delete"> Delete</i>
		<i class="fa fa-times confirm-cancel"> Cancel</i>
	</div>
</template>

<template name="footer">
	<div class="footer-wrap">
<!-- 		Made with Meteor, Medium-Editor-js, Jquery-ui-Sortable, <br/> 
		Typeahead, FontAwesome & <i class="fa fa-heart"></i>, by Steve Chen -->
	</div>
</template>

<template name="loading">
	loading...
</template>
